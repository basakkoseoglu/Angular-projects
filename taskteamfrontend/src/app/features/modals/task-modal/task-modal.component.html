<div class="modal-header">
  <h5 class="modal-title">{{ isEditMode ? 'Görev Güncelle' : 'Yeni Görev Ekle' }}</h5>
  <button type="button" class="btn-close" (click)="activeModal.dismiss()"></button>
</div>

<div class="modal-body">
  <form [formGroup]="taskForm" (ngSubmit)="submitForm()">
    <!-- proje -->
    <div class="mb-3">
      <label>Proje *</label>
      <select class="form-select" formControlName="projectId">
        <option value="">Proje seçin...</option>
        <option *ngFor="let p of projects" [value]="p.id">{{ p.projectName }}</option>
      </select>
    </div>

    <!-- personel -->
    <div class="mb-3">
      <label>Atanacak Personel *</label>
      <select class="form-select" formControlName="assignedPersonnelId">
        <option value="">Personel seçin...</option>
        <option *ngFor="let per of personnels" [value]="per.id">
          {{ per.firstName }} {{ per.lastName }}
        </option>
      </select>
    </div>

    <!-- başlık -->
    <div class="mb-3">
      <label>Görev Başlığı *</label>
      <input type="text" class="form-control" formControlName="taskTitle" />
    </div>

    <!-- açıklama -->
    <div class="mb-3">
      <label>Görev Açıklaması *</label>
      <textarea class="form-control" formControlName="taskDescription" rows="3"></textarea>
    </div>

    <!-- öncelik -->
    <div class="mb-3">
      <label>Öncelik *</label>
      <select class="form-select" formControlName="priority">
        <option value="Düşük">Düşük</option>
        <option value="Orta">Orta</option>
        <option value="Yüksek">Yüksek</option>
      </select>
    </div>

    <!-- durum sadece düzenleme modunda -->
    <div class="mb-3" *ngIf="isEditMode">
      <label>Durum *</label>
      <select class="form-select" formControlName="status">
        <option value="Yeni">Yeni</option>
        <option value="Devam Ediyor">Devam Ediyor</option>
        <option value="Tamamlandı">Tamamlandı</option>
      </select>
    </div>
  </form>
</div>

<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">İptal</button>
  <button type="submit" class="btn btn-primary" (click)="submitForm()" [disabled]="loading">
    <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
    {{ isEditMode ? 'Güncelle' : 'Ekle' }}
  </button>
</div>
